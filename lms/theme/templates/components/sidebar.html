<!-- Sidebar -->
<div
  id="sidebar"
  class="hidden md:flex md:flex-shrink-0 transition-all duration-300 ease-in-out"
>
  <div
    id="sidebar-container"
    class="flex flex-col w-64 bg-gray-900 border-r border-gray-200 dark:border-gray-800 shadow-sm transition-all duration-300 ease-in-out"
  >
    <!-- Sidebar header -->
    <div
      class="flex items-center justify-between h-16 px-4 border-b border-gray-200 dark:border-gray-800"
    >
      <h1
        class="text-xl font-semibold text-white dark:text-white sidebar-text flex items-center"
      >
        <i
          class="fas fa-book-open mr-2 text-indigo-600 dark:text-indigo-400"
        ></i>
        <span class="sidebar-text-item">LibraryMS</span>
      </h1>
      <!-- Collapse button -->
      <button
        id="collapse-btn"
        class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 focus:outline-none"
      >
        <i class="fas fa-chevron-left"></i>
      </button>
    </div>

    <!-- Sidebar links -->
    <div class="flex-1 px-3 py-4 space-y-1 overflow-y-auto">
      {% if user.is_authenticated %} {% if user.role == 'member' %}
      <div class="px-3 py-2">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Member
        </p>
      </div>
      <a
        href="{% url 'library:home' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-home text-base mr-2 {% if request.path == '/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">My Dashboard</span>
      </a>

      <a
        href="{% url 'reservations:user_reservations' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/reserve/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-sync text-base mr-2 {% if request.path == '/reserve/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Reserve a Book</span>
      </a>
      <a
        href="{% url 'borrow:borrowing_history' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/history/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-clock text-base mr-2 {% if request.path == '/history/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Borrowing History</span>
      </a>

      <a
        href="{% url 'users:membership' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/users/membership/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-crown text-base mr-2 {% if request.path == '/users/membership/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Membership</span>
      </a>

      <div class="px-3 py-2 mt-6">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Settings
        </p>
      </div>
      <a
        href="{% url 'users:profile' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/profile/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-cog text-base mr-2 {% if request.path == '/profile/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Profile</span>
      </a>
      
      <!-- Privacy & Legal -->
      <div class="px-3 py-2 mt-6">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Privacy & Legal
        </p>
      </div>
      <a
        href="{% url 'privacy:privacy_policy' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black group"
      >
        <i
          class="fas fa-shield-alt text-base mr-2 text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400"
        ></i>
        <span class="sidebar-text-item">Privacy Policy</span>
      </a>
      <a
        href="{% url 'privacy:cookie_policy' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black group"
      >
        <i
          class="fas fa-cookie-bite text-base mr-2 text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400"
        ></i>
        <span class="sidebar-text-item">Cookie Policy</span>
      </a>
      {% elif user.role == 'librarian' %}
      <div class="px-3 py-2">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Librarian
        </p>
      </div>
      <a
        href="{% url 'library:home' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-home text-base mr-2 {% if request.path == '/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Dashboard</span>
      </a>

      <div class="mt-4 px-3 py-2">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Books
        </p>
      </div>

      <a
        href="{% url 'library:book_add' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.resolver_match.url_name == 'book_add' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-plus-circle text-base mr-2 {% if request.resolver_match.url_name == 'book_add' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Book Collection</span>
      </a>

      <div class="mt-4 px-3 py-2">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Management
        </p>
      </div>
      <a
        href="{% url 'reservations:reservation_list' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/reservations/approve/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-clipboard-check text-base mr-2 {% if request.path == '/reservations/approve/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Approve Reservations</span>
      </a>

      <a
        href="{% url 'borrow:borrow_list' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/borrowings/active/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-file-alt text-base mr-2 {% if request.path == '/borrowings/active/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Active Borrowings</span>
      </a>

      <a
        href="{% url 'borrow:pending_requests_list' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/borrowings/pending/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-clock text-base mr-2 {% if request.path == '/borrowings/pending/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Pending Borrowings</span>
      </a>

      <a
        href="{% url 'borrow:extension_requests_list' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/extension-requests/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-clock text-base mr-2 {% if request.path == '/extension-requests/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Extension Requests</span>
      </a>


      <a
        href="{% url 'library:reports' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if '/reports/' in request.path %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-chart-bar text-base mr-2 {% if '/reports/' in request.path %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Quick Reports</span>
      </a>

      <div class="px-3 py-2 mt-6">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Settings
        </p>
      </div>
      <a
        href="{% url 'users:profile' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/profile/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-cog text-base mr-2 {% if request.path == '/profile/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Settings</span>
      </a>
      {% elif user.role == 'admin' %}
      <div class="px-3 py-2">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Administrator
        </p>
      </div>
      <a
        href="{% url 'admin_dashboard:dashboard' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/admin_dashboard/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-home text-base mr-2 {% if request.path == '/admin_dashboard/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Admin Dashboard</span>
      </a>

      <div class="mt-4 px-3 py-2">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Management
        </p>
      </div>
      <a
        href="{% url 'admin_dashboard:manage_users' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/admin_dashboard/users/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-users text-base mr-2 {% if request.path == '/admin_dashboard/users/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Manage Users</span>
      </a>

      <div class="mt-4 px-3 py-2">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          System
        </p>
      </div>

      <a
        href="{% url 'admin_dashboard:reports_dashboard' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if '/admin_dashboard/reports/' in request.path %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-file-alt text-base mr-2 {% if '/admin_dashboard/reports/' in request.path %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">All Reports</span>
      </a>

      <a
        href="{% url 'admin_dashboard:system_settings' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/admin_dashboard/settings/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-cog text-base mr-2 {% if request.path == '/admin_dashboard/settings/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">System Settings</span>
      </a>

      <a
        href="{% url 'admin_dashboard:session_management' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/admin_dashboard/sessions/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-clock text-base mr-2 {% if request.path == '/admin_dashboard/sessions/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Session Management</span>
      </a>

      <a
        href="{% url 'admin_dashboard:audit_logs' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/admin_dashboard/audit-logs/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-clipboard-list text-base mr-2 {% if request.path == '/admin_dashboard/audit-logs/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Audit Logs</span>
      </a>
      {%elif user.role == 'manager'%}
      <div class="px-3 py-2">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Manager
        </p>
      </div>
      <a
        href="{% url 'library:home' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-home text-base mr-2 {% if request.path == '/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Home</span>
      </a>
      <div class="px-3 py-2">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Analytics
        </p>
      </div>
      <a
        href="{% url 'library:reports' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if '/reports/' in request.path %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-file-alt text-base mr-2 {% if request.path == '/reports/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Reports</span>
      </a>
      <div class="px-3 py-2">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Management
        </p>
      </div>
      <a
        href="{% url 'users:manage_users' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if '/users/manage-users/' in request.path %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-users text-base mr-2 {% if '/users/manage-users/' in request.path %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Manage Users</span>
      </a>
      <a
        href="{% url 'branches:manage_branches' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if '/branches/manage_branches/' in request.path %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-building text-base mr-2 {% if '/branches/manage_branches/' in request.path %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Manage Branches</span>
      </a>
      <a
        href="{% url 'users:manage_memberships' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if '/users/manage-memberships/' in request.path %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-crown text-base mr-2 {% if '/users/manage-memberships/' in request.path %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Manage Memberships</span>
      </a>

      {% else %}
      <!-- Default authenticated user links -->
      <div class="px-3 py-2">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          User
        </p>
      </div>
      <a
        href="{% url 'library:home' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-home text-base mr-2 {% if request.path == '/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Dashboard</span>
      </a>
      <a
        href="{% url 'users:profile' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.path == '/profile/' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-user text-base mr-2 {% if request.path == '/profile/' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">My Profile</span>
      </a>
      {% endif %} {% else %}
      <!-- Guest links -->
      <div class="px-3 py-2">
        <p
          class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider sidebar-text-item"
        >
          Guest
        </p>
      </div>
      <a
        href="{% url 'library:home' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md {% if request.resolver_match.url_name == 'home' %}text-indigo-700 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-950/50{% else %}text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black{% endif %} group"
      >
        <i
          class="fas fa-home text-base mr-2 {% if request.resolver_match.url_name == 'home' %}text-indigo-600 dark:text-indigo-400{% else %}text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400{% endif %}"
        ></i>
        <span class="sidebar-text-item">Home</span>
      </a>

      {% endif %}
    </div>

    <!-- Logout button -->
    <div class="p-4 border-t border-gray-200 dark:border-gray-800">
      {% if user.is_authenticated %}
      <a
        href="{% url 'users:logout' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black group"
      >
        <i
          class="fas fa-sign-out-alt text-base mr-2 text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400"
        ></i>
        <span class="sidebar-text-item">Logout</span>
      </a>
      {% else %}
      <a
        href="{% url 'users:login' %}"
        class="flex items-center px-3 py-2 text-sm font-medium rounded-md text-white hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-black group"
      >
        <i
          class="fas fa-sign-in-alt text-base mr-2 text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400"
        ></i>
        <span class="sidebar-text-item">Login</span>
      </a>
      {% endif %}
    </div>
  </div>
</div>

<!-- Mobile sidebar overlay -->
<div
  id="sidebar-overlay"
  class="fixed inset-0 bg-gray-800 bg-opacity-75 z-20 hidden transition-opacity duration-300 ease-in-out"
></div>
